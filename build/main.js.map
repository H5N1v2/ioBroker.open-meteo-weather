{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["import * as utils from '@iobroker/adapter-core';\nimport { weatherTranslations } from './lib/words';\nimport { translations } from './i18n';\nimport { fetchAllWeatherData } from './lib/api_caller';\nimport { unitMapMetric, unitMapImperial, unitTranslations } from './lib/units';\nimport * as SunCalc from 'suncalc';\n\nclass OpenMeteoWeather extends utils.Adapter {\n\tprivate updateInterval: ioBroker.Interval | undefined = undefined;\n\tprivate systemLang: string = 'de';\n\tprivate systemTimeZone: string = 'Europe/Berlin';\n\n\t// Cached values f\u00FCr Performance\n\tprivate cachedTranslations: any = null;\n\tprivate cachedUnitMap: any = null;\n\tprivate cachedIsImperial: boolean = false;\n\n\t// Objekt-Caching f\u00FCr bereits erstellte States (verhindert redundante DB-Zugriffe)\n\tprivate createdObjects = new Set<string>();\n\n\t// Update-Sperre um \u00DCberschneidungen zu verhindern\n\tprivate isUpdating = false;\n\n\t// Konstanten f\u00FCr Icon-Mapping\n\tprivate readonly WIND_DIRECTION_FILES = [\n\t\t'n.png',\n\t\t'no.png',\n\t\t'o.png',\n\t\t'so.png',\n\t\t's.png',\n\t\t'sw.png',\n\t\t'w.png',\n\t\t'nw.png',\n\t];\n\tprivate readonly MOON_PHASE_ICONS: Record<string, string> = {\n\t\tnew_moon: 'nm.png',\n\t\twaxing_crescent: 'zsm.png',\n\t\tfirst_quarter: 'ev.png',\n\t\twaxing_gibbous: 'zdm.png',\n\t\tfull_moon: 'vm.png',\n\t\twaning_gibbous: 'adm.png',\n\t\tlast_quarter: 'lv.png',\n\t\twaning_crescent: 'asm.png',\n\t};\n\n\t// Initialisiert die Basisklasse des Adapters\n\tconstructor(options: Partial<utils.AdapterOptions> = {}) {\n\t\tsuper({ ...options, name: 'open-meteo-weather' });\n\t\tthis.on('ready', this.onReady.bind(this));\n\t\tthis.on('unload', this.onUnload.bind(this));\n\t}\n\n\t// Holt die passende \u00DCbersetzung f\u00FCr Objektnamen aus den i18n Dateien\n\tprivate getTranslation(key: string): string {\n\t\tif (!translations) {\n\t\t\treturn key;\n\t\t}\n\t\treturn translations[this.systemLang]?.[key] || translations.en?.[key] || key;\n\t}\n\n\t// Wandelt Gradzahlen in Himmelsrichtungen als Text um\n\tprivate getWindDirection(deg: number): string {\n\t\tconst directions = this.cachedTranslations.dirs || ['N', 'NO', 'O', 'SO', 'S', 'SW', 'W', 'NW'];\n\t\tconst index = Math.round(deg / 45) % 8;\n\t\treturn directions[index];\n\t}\n\n\t// Liefert den Pfad zum passenden Icon f\u00FCr die Windrichtung\n\tprivate getWindDirectionIcon(deg: number): string {\n\t\tconst index = Math.round(deg / 45) % 8;\n\t\treturn `/adapter/${this.name}/icons/wind_direction_icons/${this.WIND_DIRECTION_FILES[index]}`;\n\t}\n\n\t// Ermittelt basierend auf der Mondphase das passende Icon\n\tprivate getMoonPhaseIcon(phaseKey: string): string {\n\t\tconst fileName = this.MOON_PHASE_ICONS[phaseKey] || 'nm.png';\n\t\treturn `/adapter/${this.name}/icons/moon_phases/${fileName}`;\n\t}\n\n\t// Ermittelt basierend auf der Windgeschwindigkeit das passende Warn-Icon\n\tprivate getWindGustIcon(gusts: number): string {\n\t\tconst factor = this.cachedIsImperial ? 1.60934 : 1;\n\n\t\tif (gusts < 39 / factor) {\n\t\t\treturn `/adapter/${this.name}/icons/wind_icons/z.png`;\n\t\t}\n\t\tif (gusts < 50 / factor) {\n\t\t\treturn `/adapter/${this.name}/icons/wind_icons/0.png`;\n\t\t}\n\t\tif (gusts < 62 / factor) {\n\t\t\treturn `/adapter/${this.name}/icons/wind_icons/1.png`;\n\t\t}\n\t\tif (gusts < 75 / factor) {\n\t\t\treturn `/adapter/${this.name}/icons/wind_icons/2.png`;\n\t\t}\n\t\tif (gusts < 89 / factor) {\n\t\t\treturn `/adapter/${this.name}/icons/wind_icons/3.png`;\n\t\t}\n\t\treturn `/adapter/${this.name}/icons/wind_icons/4.png`;\n\t}\n\n\t// Errechnet den Taupunkt unter Ber\u00FCcksichtigung der eingestellten Ma\u00DFeinheit\n\tprivate calculateDewPoint(temp: number, humidity: number): number {\n\t\tconst t = this.cachedIsImperial ? ((temp - 32) * 5) / 9 : temp;\n\t\tconst rh = humidity / 100;\n\t\tconst a = 17.625;\n\t\tconst b = 243.04;\n\t\tconst alpha = Math.log(rh) + (a * t) / (b + t);\n\t\tlet dewPoint = (b * alpha) / (a - alpha);\n\t\tif (this.cachedIsImperial) {\n\t\t\tdewPoint = (dewPoint * 9) / 5 + 32;\n\t\t}\n\t\treturn parseFloat(dewPoint.toFixed(1));\n\t}\n\n\t// Setzt die Grundeinstellungen beim Start und startet den Update-Zyklus\n\tprivate async onReady(): Promise<void> {\n\t\tthis.log.debug('onReady: Adapter starting...');\n\t\ttry {\n\t\t\tconst sysConfig = await this.getForeignObjectAsync('system.config');\n\t\t\tif (sysConfig && sysConfig.common) {\n\t\t\t\tthis.systemLang = sysConfig.common.language || 'de';\n\t\t\t\tthis.systemTimeZone = (sysConfig.common as any).timezone || 'Europe/Berlin';\n\t\t\t\tthis.log.debug(`onReady: System language: ${this.systemLang}, Timezone: ${this.systemTimeZone}`);\n\t\t\t}\n\n\t\t\t// Cache h\u00E4ufig verwendete Werte\n\t\t\tconst config = this.config as any;\n\t\t\tthis.cachedIsImperial = config.isImperial || false;\n\t\t\tthis.cachedUnitMap = this.cachedIsImperial ? unitMapImperial : unitMapMetric;\n\t\t\tthis.cachedTranslations = weatherTranslations[this.systemLang] || weatherTranslations.de;\n\n\t\t\t// Cleanup veralteter Standorte\n\t\t\tawait this.cleanupDeletedLocations();\n\n\t\t\t// Info-Datenpunkt f\u00FCr letztes Update erstellen\n\t\t\tawait this.extendObject('info.lastUpdate', {\n\t\t\t\ttype: 'state',\n\t\t\t\tcommon: {\n\t\t\t\t\tname: 'Last Update',\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\trole: 'text',\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t},\n\t\t\t\tnative: {},\n\t\t\t});\n\t\t} catch (err: any) {\n\t\t\tthis.log.error(`Initialization failed: ${err.message}`);\n\t\t}\n\n\t\tawait this.updateData();\n\t\tconst config = this.config as any;\n\t\tconst minutes = parseInt(config.updateInterval) || 30;\n\t\tconst intervalMs = minutes * 60000;\n\n\t\tthis.updateInterval = this.setInterval(() => this.updateData(), intervalMs);\n\t\tthis.log.debug(`onReady: Scheduled update every ${minutes} minutes.`);\n\t}\n\n\tprivate async cleanupDeletedLocations(): Promise<void> {\n\t\tthis.log.debug('cleanupDeletedLocations: Starting cleanup check...');\n\t\tconst config = this.config as any;\n\t\tconst locations = config.locations || [];\n\t\t// Set f\u00FCr O(1) Lookup-Performance statt O(n) mit Array.includes\n\t\tconst validFolders = new Set(locations.map((loc: any) => loc.name.replace(/[^a-zA-Z0-9]/g, '_')));\n\n\t\tconst forecastDays = parseInt(config.forecastDays) || 1;\n\t\tconst forecastHoursEnabled = config.forecastHoursEnabled || false;\n\t\tconst airQualityEnabled = config.airQualityEnabled || false;\n\t\tconst hoursLimit = parseInt(config.forecastHours) || 24;\n\n\t\tconst allObjects = await this.getAdapterObjectsAsync();\n\t\tlet deletedCount = 0;\n\n\t\tfor (const objId in allObjects) {\n\t\t\tconst parts = objId.split('.');\n\t\t\tif (parts.length > 2) {\n\t\t\t\tconst folderName = parts[2]; // Der Stadt-Ordner\n\n\t\t\t\t// 1. Ganze Stadt gel\u00F6scht?\n\t\t\t\tif (!validFolders.has(folderName)) {\n\t\t\t\t\tthis.log.info(`L\u00F6sche veralteten Standort: ${folderName}`);\n\t\t\t\t\tawait this.delObjectAsync(objId, { recursive: true });\n\t\t\t\t\tdeletedCount++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// 2. Luftqualit\u00E4t deaktiviert?\n\t\t\t\tif (!airQualityEnabled && objId.includes(`${folderName}.air`)) {\n\t\t\t\t\tawait this.delObjectAsync(objId, { recursive: true });\n\t\t\t\t\tdeletedCount++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// 3. St\u00FCndliche Vorhersage komplett deaktiviert?\n\t\t\t\tif (!forecastHoursEnabled && objId.includes(`${folderName}.weather.forecast.hourly`)) {\n\t\t\t\t\tawait this.delObjectAsync(objId, { recursive: true });\n\t\t\t\t\tdeletedCount++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// 4. Entfernt\n\n\t\t\t\t// 5. Zu viele normale Vorhersage-Tage? (dayX au\u00DFerhalb von hourly)\n\t\t\t\tif (objId.includes(`${folderName}.weather.forecast.day`) && !objId.includes('.hourly.')) {\n\t\t\t\t\tconst dayMatch = objId.match(/\\.day(\\d+)/);\n\t\t\t\t\tif (dayMatch) {\n\t\t\t\t\t\tconst dayNum = parseInt(dayMatch[1]);\n\t\t\t\t\t\tif (dayNum >= forecastDays) {\n\t\t\t\t\t\t\tawait this.delObjectAsync(objId, { recursive: true });\n\t\t\t\t\t\t\tdeletedCount++;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// --- NEU: Punkt 5b: Zu viele Luftqualit\u00E4ts-Vorhersage-Tage? ---\n\t\t\t\tif (objId.includes(`${folderName}.air.forecast.day`)) {\n\t\t\t\t\tconst aqDayMatch = objId.match(/\\.day(\\d+)/);\n\t\t\t\t\tif (aqDayMatch) {\n\t\t\t\t\t\tconst aqDayNum = parseInt(aqDayMatch[1]);\n\t\t\t\t\t\t// Holen des Limits aus der Config (0 wenn deaktiviert oder nicht gesetzt)\n\t\t\t\t\t\tconst aqLimit = airQualityEnabled ? parseInt(config.airQualityForecastDays) || 0 : 0;\n\n\t\t\t\t\t\tif (aqDayNum >= aqLimit) {\n\t\t\t\t\t\t\tthis.log.info(\n\t\t\t\t\t\t\t\t`Bereinige veralteten Luftqualit\u00E4ts-Vorhersagetag: ${folderName}.air.forecast.day${aqDayNum}`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tawait this.delObjectAsync(objId, { recursive: true });\n\t\t\t\t\t\t\tdeletedCount++;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 6. Zu viele Stunden pro Tag?\n\t\t\t\tif (forecastHoursEnabled && objId.includes('.hourly.next_hours.hour')) {\n\t\t\t\t\tconst hourMatch = objId.match(/\\.hour(\\d+)/);\n\t\t\t\t\tif (hourMatch) {\n\t\t\t\t\t\tconst hourNum = parseInt(hourMatch[1]);\n\t\t\t\t\t\tif (hourNum >= hoursLimit) {\n\t\t\t\t\t\t\tawait this.delObjectAsync(objId, { recursive: true });\n\t\t\t\t\t\t\tdeletedCount++;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.log.debug(`cleanupDeletedLocations: Finished. Objects deleted: ${deletedCount}`);\n\t}\n\n\t// Steuert den Abruf der Wetterdaten und verteilt sie an die Verarbeitungsfunktionen\n\tprivate async updateData(): Promise<void> {\n\t\t// \u00DCberschneidungsschutz: Wenn bereits ein Update l\u00E4uft, abbrechen\n\t\tif (this.isUpdating) {\n\t\t\tthis.log.warn('Update skipped: Previous update is still running.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isUpdating = true;\n\t\tthis.log.debug('updateData: Starting data fetch for all locations...');\n\n\t\ttry {\n\t\t\tconst config = this.config as any;\n\t\t\tconst locations = config.locations;\n\n\t\t\tif (!locations || !Array.isArray(locations) || locations.length === 0) {\n\t\t\t\tthis.log.warn('No locations configured.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (const loc of locations) {\n\t\t\t\tconst folderName = loc.name.replace(/[^a-zA-Z0-9]/g, '_');\n\t\t\t\tthis.log.debug(`updateData: Fetching data for ${loc.name} (${loc.latitude}/${loc.longitude})`);\n\n\t\t\t\tconst data = await fetchAllWeatherData(\n\t\t\t\t\t{\n\t\t\t\t\t\tlatitude: loc.latitude,\n\t\t\t\t\t\tlongitude: loc.longitude,\n\t\t\t\t\t\tforecastDays: config.forecastDays || 7,\n\t\t\t\t\t\tforecastHours: config.forecastHours || 1,\n\t\t\t\t\t\tforecastHoursEnabled: config.forecastHoursEnabled || false,\n\t\t\t\t\t\tairQualityEnabled: config.airQualityEnabled || false,\n\t\t\t\t\t\tairQualityForecastDays: parseInt(config.airQualityForecastDays) || 0,\n\t\t\t\t\t\ttimezone: loc.timezone || this.systemTimeZone,\n\t\t\t\t\t\tisImperial: config.isImperial || false,\n\t\t\t\t\t},\n\t\t\t\t\tthis.log,\n\t\t\t\t);\n\n\t\t\t\tif (data.weather) {\n\t\t\t\t\tthis.log.debug(`updateData: Processing weather for ${folderName}`);\n\t\t\t\t\tawait this.processWeatherData(data.weather, folderName, loc.latitude, loc.longitude);\n\t\t\t\t}\n\t\t\t\tif (data.hourly) {\n\t\t\t\t\tthis.log.debug(`updateData: Processing hourly forecast for ${folderName}`);\n\t\t\t\t\tawait this.processForecastHoursData(data.hourly, folderName);\n\t\t\t\t}\n\t\t\t\tif (data.air) {\n\t\t\t\t\tthis.log.debug(`updateData: Processing air quality for ${folderName}`);\n\t\t\t\t\tawait this.processAirQualityData(data.air, folderName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.log.debug('updateData: All locations processed successfully.');\n\n\t\t\t// Zeitstempel f\u00FCr letztes Update setzen\n\t\t\tconst now = new Date();\n\t\t\tconst day = String(now.getDate()).padStart(2, '0');\n\t\t\tconst month = String(now.getMonth() + 1).padStart(2, '0');\n\t\t\tconst year = now.getFullYear();\n\t\t\tconst hours = String(now.getHours()).padStart(2, '0');\n\t\t\tconst minutes = String(now.getMinutes()).padStart(2, '0');\n\t\t\tconst seconds = String(now.getSeconds()).padStart(2, '0');\n\t\t\tconst timestamp = `${day}.${month}.${year}, ${hours}:${minutes}:${seconds}`;\n\t\t\tawait this.setState('info.lastUpdate', { val: timestamp, ack: true });\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`Retrieval failed: ${error.message}`);\n\t\t} finally {\n\t\t\t// Update-Sperre immer freigeben, auch bei Fehler\n\t\t\tthis.isUpdating = false;\n\t\t}\n\t}\n\n\t// Verarbeitet aktuelle Wetterdaten sowie die t\u00E4gliche Vorhersage inkl. lokaler Monddaten\n\tprivate async processWeatherData(data: any, locationPath: string, lat: number, lon: number): Promise<void> {\n\t\tconst t = this.cachedTranslations;\n\n\t\tif (data.current) {\n\t\t\tconst isDay = data.current.is_day;\n\t\t\tconst root = `${locationPath}.weather.current`;\n\n\t\t\tif (\n\t\t\t\ttypeof data.current.temperature_2m === 'number' &&\n\t\t\t\ttypeof data.current.relative_humidity_2m === 'number'\n\t\t\t) {\n\t\t\t\tconst dp = this.calculateDewPoint(data.current.temperature_2m, data.current.relative_humidity_2m);\n\t\t\t\tawait this.extendOrCreateState(`${root}.dew_point_2m`, dp, 'dew_point_2m');\n\t\t\t}\n\n\t\t\tfor (const key in data.current) {\n\t\t\t\tlet val = data.current[key];\n\t\t\t\tif (key === 'time' && typeof val === 'string') {\n\t\t\t\t\tval = new Date(val).toLocaleString(this.systemLang, {\n\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\thour12: this.systemLang === 'en',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tawait this.extendOrCreateState(`${root}.${key}`, val, key);\n\n\t\t\t\tif (key === 'weather_code') {\n\t\t\t\t\tawait this.createCustomState(`${root}.weather_text`, t.codes[val] || '?', 'string', 'text', '');\n\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t`${root}.icon_url`,\n\t\t\t\t\t\t`/adapter/${this.name}/icons/weather_icons/${val}${isDay === 1 ? '' : 'n'}.png`,\n\t\t\t\t\t\t'string',\n\t\t\t\t\t\t'url',\n\t\t\t\t\t\t'',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (key === 'wind_direction_10m' && typeof val === 'number') {\n\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t`${root}.wind_direction_text`,\n\t\t\t\t\t\tthis.getWindDirection(val),\n\t\t\t\t\t\t'string',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t`${root}.wind_direction_icon`,\n\t\t\t\t\t\tthis.getWindDirectionIcon(val),\n\t\t\t\t\t\t'string',\n\t\t\t\t\t\t'url',\n\t\t\t\t\t\t'',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (key === 'wind_gusts_10m' && typeof val === 'number') {\n\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t`${root}.wind_gust_icon`,\n\t\t\t\t\t\tthis.getWindGustIcon(val),\n\t\t\t\t\t\t'string',\n\t\t\t\t\t\t'url',\n\t\t\t\t\t\t'',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data.daily) {\n\t\t\tfor (let i = 0; i < (data.daily.time?.length || 0); i++) {\n\t\t\t\tconst dayPath = `${locationPath}.weather.forecast.day${i}`;\n\n\t\t\t\t// Berechnung der Monddaten f\u00FCr diesen Tag (lokal via SunCalc)\n\t\t\t\tconst forecastDate = new Date(data.daily.time[i]);\n\t\t\t\tconst moonTimes = SunCalc.getMoonTimes(forecastDate, lat, lon);\n\t\t\t\tconst moonIllumination = SunCalc.getMoonIllumination(forecastDate);\n\n\t\t\t\t// Mondaufgang und -untergang formatieren\n\t\t\t\tconst mRise = moonTimes.rise\n\t\t\t\t\t? moonTimes.rise.toLocaleTimeString(this.systemLang, {\n\t\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\t\thour12: this.systemLang === 'en',\n\t\t\t\t\t\t})\n\t\t\t\t\t: '--:--';\n\t\t\t\tconst mSet = moonTimes.set\n\t\t\t\t\t? moonTimes.set.toLocaleTimeString(this.systemLang, {\n\t\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\t\thour12: this.systemLang === 'en',\n\t\t\t\t\t\t})\n\t\t\t\t\t: '--:--';\n\n\t\t\t\tawait this.createCustomState(`${dayPath}.moonrise`, mRise, 'string', 'value', '');\n\t\t\t\tawait this.createCustomState(`${dayPath}.moonset`, mSet, 'string', 'value', '');\n\n\t\t\t\t// Mondphase in Text umwandeln (nutzt \u00DCbersetzung aus words.ts)\n\t\t\t\tconst phaseValue = moonIllumination.phase;\n\t\t\t\tlet phaseKey = 'new_moon';\n\t\t\t\tif (phaseValue >= 0.03 && phaseValue < 0.22) {\n\t\t\t\t\tphaseKey = 'waxing_crescent';\n\t\t\t\t} else if (phaseValue >= 0.22 && phaseValue < 0.28) {\n\t\t\t\t\tphaseKey = 'first_quarter';\n\t\t\t\t} else if (phaseValue >= 0.28 && phaseValue < 0.47) {\n\t\t\t\t\tphaseKey = 'waxing_gibbous';\n\t\t\t\t} else if (phaseValue >= 0.47 && phaseValue < 0.53) {\n\t\t\t\t\tphaseKey = 'full_moon';\n\t\t\t\t} else if (phaseValue >= 0.53 && phaseValue < 0.72) {\n\t\t\t\t\tphaseKey = 'waning_gibbous';\n\t\t\t\t} else if (phaseValue >= 0.72 && phaseValue < 0.78) {\n\t\t\t\t\tphaseKey = 'last_quarter';\n\t\t\t\t} else if (phaseValue >= 0.78 && phaseValue < 0.97) {\n\t\t\t\t\tphaseKey = 'waning_crescent';\n\t\t\t\t}\n\n\t\t\t\tconst phaseText = t.moon_phases ? t.moon_phases[phaseKey] : phaseKey;\n\t\t\t\tawait this.createCustomState(`${dayPath}.moon_phase_text`, phaseText, 'string', 'text', '');\n\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t`${dayPath}.moon_phase_val`,\n\t\t\t\t\tparseFloat(phaseValue.toFixed(2)),\n\t\t\t\t\t'number',\n\t\t\t\t\t'value',\n\t\t\t\t\t'',\n\t\t\t\t);\n\n\t\t\t\t// Erstellt die Icon-URL f\u00FCr die Mondphase\n\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t`${dayPath}.moon_phase_icon`,\n\t\t\t\t\tthis.getMoonPhaseIcon(phaseKey),\n\t\t\t\t\t'string',\n\t\t\t\t\t'url',\n\t\t\t\t\t'',\n\t\t\t\t);\n\n\t\t\t\t// Name des Tages: Wochentag\n\t\t\t\tconst nameDay = forecastDate.toLocaleDateString(this.systemLang, { weekday: 'long' });\n\t\t\t\tawait this.createCustomState(`${dayPath}.name_day`, nameDay, 'string', 'text', '');\n\n\t\t\t\tfor (const key in data.daily) {\n\t\t\t\t\tlet val = data.daily[key][i];\n\t\t\t\t\tif (key === 'time' && typeof val === 'string') {\n\t\t\t\t\t\tval = new Date(val).toLocaleDateString(this.systemLang, {\n\t\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'sunshine_duration' && typeof val === 'number') {\n\t\t\t\t\t\tval = parseFloat((val / 3600).toFixed(2));\n\t\t\t\t\t}\n\t\t\t\t\tif ((key === 'sunrise' || key === 'sunset') && typeof val === 'string') {\n\t\t\t\t\t\tval = new Date(val).toLocaleTimeString(this.systemLang, {\n\t\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\t\thour12: this.systemLang === 'en',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tawait this.extendOrCreateState(`${dayPath}.${key}`, val, key);\n\n\t\t\t\t\tif (key === 'wind_direction_10m_dominant' && typeof val === 'number') {\n\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t`${dayPath}.wind_direction_text`,\n\t\t\t\t\t\t\tthis.getWindDirection(val),\n\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t`${dayPath}.wind_direction_icon`,\n\t\t\t\t\t\t\tthis.getWindDirectionIcon(val),\n\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t'url',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'wind_gusts_10m_max' && typeof val === 'number') {\n\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t`${dayPath}.wind_gust_icon`,\n\t\t\t\t\t\t\tthis.getWindGustIcon(val),\n\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t'url',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'weather_code') {\n\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t`${dayPath}.weather_text`,\n\t\t\t\t\t\t\tt.codes[val] || '?',\n\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t`${dayPath}.icon_url`,\n\t\t\t\t\t\t\t`/adapter/${this.name}/icons/weather_icons/${val}.png`,\n\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t'url',\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Verarbeitet die st\u00FCndlichen Vorhersagedaten\n\tprivate async processForecastHoursData(data: any, locationPath: string): Promise<void> {\n\t\tconst t = this.cachedTranslations;\n\t\tconst config = this.config as any;\n\t\tconst hoursPer_h_Limit = parseInt(config.forecastHours) || 24;\n\n\t\tif (data.hourly && data.hourly.time) {\n\t\t\tconst isDay = data.hourly.is_day;\n\t\t\tfor (let i = 0; i < data.hourly.time.length; i++) {\n\t\t\t\tif (i < hoursPer_h_Limit) {\n\t\t\t\t\tconst hourPath = `${locationPath}.weather.forecast.hourly.next_hours.hour${i}`;\n\t\t\t\t\tfor (const key in data.hourly) {\n\t\t\t\t\t\tlet val = data.hourly[key][i];\n\t\t\t\t\t\tif (key === 'time' && typeof val === 'string') {\n\t\t\t\t\t\t\tconst dateObj = new Date(val);\n\t\t\t\t\t\t\t// Datum in separaten Datenpunkt\n\t\t\t\t\t\t\tconst lang = this.systemLang || 'de';\n\t\t\t\t\t\t\tconst dateVal = dateObj.toLocaleDateString(lang, {\n\t\t\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait this.extendOrCreateState(`${hourPath}.date`, dateVal, 'date');\n\t\t\t\t\t\t\t// Zeit (nur Uhrzeit)\n\t\t\t\t\t\t\tval = dateObj.toLocaleTimeString(this.systemLang, {\n\t\t\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\t\t\thour12: this.systemLang === 'en',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (key === 'sunshine_duration' && typeof val === 'number') {\n\t\t\t\t\t\t\tval = parseFloat((val / 3600).toFixed(2));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this.extendOrCreateState(`${hourPath}.${key}`, val, key);\n\n\t\t\t\t\t\tif (key === 'weather_code') {\n\t\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t\t`${hourPath}.weather_text`,\n\t\t\t\t\t\t\t\tt.codes[val] || '?',\n\t\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst currentIsDayh = isDay ? isDay[i] : 1;\n\t\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t\t`${hourPath}.icon_url`,\n\t\t\t\t\t\t\t\t`/adapter/${this.name}/icons/weather_icons/${val}${currentIsDayh === 1 ? '' : 'n'}.png`,\n\t\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t\t'url',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (key === 'wind_direction_10m' && typeof val === 'number') {\n\t\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t\t`${hourPath}.wind_direction_text`,\n\t\t\t\t\t\t\t\tthis.getWindDirection(val),\n\t\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t\t`${hourPath}.wind_direction_icon`,\n\t\t\t\t\t\t\t\tthis.getWindDirectionIcon(val),\n\t\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t\t'url',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (key === 'wind_gusts_10m' && typeof val === 'number') {\n\t\t\t\t\t\t\tawait this.createCustomState(\n\t\t\t\t\t\t\t\t`${hourPath}.wind_gust_icon`,\n\t\t\t\t\t\t\t\tthis.getWindGustIcon(val),\n\t\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t\t'url',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Verarbeitet Daten zur Luftqualit\u00E4t und Pollenbelastung\n\tprivate async processAirQualityData(data: any, locationPath: string): Promise<void> {\n\t\tconst t = this.cachedTranslations;\n\t\tconst config = this.config as any;\n\t\tconst aqForecastDays = parseInt(config.airQualityForecastDays) || 0;\n\n\t\t// 1. Current\n\t\tif (data.current) {\n\t\t\tconst root = `${locationPath}.air.current`;\n\t\t\tfor (const key in data.current) {\n\t\t\t\tlet val = data.current[key];\n\t\t\t\tif (key === 'time' && typeof val === 'string') {\n\t\t\t\t\tval = new Date(val).toLocaleString(this.systemLang, {\n\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\thour12: this.systemLang === 'en',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tawait this.extendOrCreateState(`${root}.${key}`, val, key);\n\n\t\t\t\tif (key.includes('pollen')) {\n\t\t\t\t\tconst pollenText = this.mapPollenToText(val, t, key);\n\t\t\t\t\tawait this.createCustomState(`${root}.${key}_text`, pollenText, 'string', 'text', '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 2. Daily Aggregation (Hourly to Daily) Airquality\n\t\tif (data.hourly && data.hourly.time && aqForecastDays > 0) {\n\t\t\tfor (let day = 0; day < aqForecastDays; day++) {\n\t\t\t\tconst dayPath = `${locationPath}.air.forecast.day${day}`;\n\t\t\t\tconst startIdx = day * 24;\n\t\t\t\tconst endIdx = startIdx + 24;\n\n\t\t\t\t// --- Wochentag und Datum vorbereiten ---\n\t\t\t\tconst forecastDate = new Date(data.hourly.time[startIdx]);\n\t\t\t\tconst nameDay = forecastDate.toLocaleDateString(this.systemLang, { weekday: 'long' });\n\t\t\t\tconst dayDate = forecastDate.toLocaleDateString(this.systemLang);\n\n\t\t\t\t// States f\u00FCr Zeit/Tag schreiben\n\t\t\t\tawait this.createCustomState(`${dayPath}.name_day`, nameDay, 'string', 'text', '');\n\t\t\t\tawait this.createCustomState(`${dayPath}.date`, dayDate, 'string', 'value', '');\n\n\t\t\t\tfor (const key in data.hourly) {\n\t\t\t\t\tif (key === 'time') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst hourlyValues = data.hourly[key].slice(startIdx, endIdx);\n\t\t\t\t\tif (hourlyValues.length > 0) {\n\t\t\t\t\t\tconst maxVal = Math.max(...hourlyValues);\n\t\t\t\t\t\tawait this.extendOrCreateState(`${dayPath}.${key}_max`, maxVal, `${key}_max`);\n\n\t\t\t\t\t\tif (key.includes('pollen')) {\n\t\t\t\t\t\t\tconst pollenText = this.mapPollenToText(maxVal, t, key);\n\t\t\t\t\t\t\tawait this.createCustomState(`${dayPath}.${key}_text`, pollenText, 'string', 'text', '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate mapPollenToText(val: number, t: any, key?: string): string {\n\t\tif (!t.pollen) {\n\t\t\treturn val.toString();\n\t\t}\n\n\t\tconst k = key || '';\n\n\t\tif (k.includes('mugwort') || k.includes('ragweed')) {\n\t\t\treturn val > 20 ? t.pollen.high : val > 5 ? t.pollen.moderate : val > 0 ? t.pollen.low : t.pollen.none;\n\t\t}\n\n\t\treturn val > 50 ? t.pollen.high : val > 10 ? t.pollen.moderate : val > 0 ? t.pollen.low : t.pollen.none;\n\t}\n\n\t// Erstellt einen neuen Datenpunkt mit benutzerdefinierter Rolle und Einheit\n\tprivate async createCustomState(\n\t\tid: string,\n\t\tval: any,\n\t\ttype: ioBroker.CommonType,\n\t\trole: string,\n\t\tunit: string,\n\t): Promise<void> {\n\t\t// Objekt-Caching: Nur erstellen, wenn noch nicht im Set vorhanden\n\t\tif (!this.createdObjects.has(id)) {\n\t\t\tthis.log.debug(`createCustomState: Creating state ${id} (role: ${role})`);\n\t\t\tconst idParts = id.split('.');\n\t\t\tconst lastPart = idParts[idParts.length - 1] || id;\n\t\t\tawait this.setObjectNotExistsAsync(id, {\n\t\t\t\ttype: 'state',\n\t\t\t\tcommon: {\n\t\t\t\t\tname: this.getTranslation(lastPart),\n\t\t\t\t\ttype,\n\t\t\t\t\trole,\n\t\t\t\t\tread: true,\n\t\t\t\t\tunit: unit ? (unitTranslations[this.systemLang]?.[unit] ?? unit) : unit,\n\t\t\t\t\twrite: false,\n\t\t\t\t},\n\t\t\t\tnative: {},\n\t\t\t});\n\t\t\tthis.createdObjects.add(id);\n\t\t}\n\t\tawait this.setState(id, { val, ack: true });\n\t}\n\n\t// Erstellt oder aktualisiert einen Datenpunkt und weist automatisch Einheiten zu\n\tprivate async extendOrCreateState(id: string, val: any, translationKey?: string): Promise<void> {\n\t\t// Objekt-Caching: Nur erstellen, wenn noch nicht im Set vorhanden\n\t\tif (!this.createdObjects.has(id)) {\n\t\t\tlet unit = '';\n\t\t\tfor (const k in this.cachedUnitMap) {\n\t\t\t\tif (id.includes(k)) {\n\t\t\t\t\tunit = this.cachedUnitMap[k];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst displayUnit = unit ? (unitTranslations[this.systemLang]?.[unit] ?? unit) : unit;\n\t\t\tthis.log.debug(`extendOrCreateState: Creating state ${id} (unit: ${displayUnit})`);\n\t\t\tconst idParts = id.split('.');\n\t\t\tconst lastPart = idParts[idParts.length - 1] || id;\n\t\t\tawait this.setObjectNotExistsAsync(id, {\n\t\t\t\ttype: 'state',\n\t\t\t\tcommon: {\n\t\t\t\t\tname: this.getTranslation(translationKey || lastPart),\n\t\t\t\t\ttype: typeof val as any,\n\t\t\t\t\trole: 'value',\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\tunit: displayUnit,\n\t\t\t\t},\n\t\t\t\tnative: {},\n\t\t\t});\n\t\t\tthis.createdObjects.add(id);\n\t\t}\n\t\tawait this.setState(id, { val, ack: true });\n\t}\n\n\t// Bereinigt Intervalle beim Beenden des Adapters\n\tprivate onUnload(callback: () => void): void {\n\t\tthis.log.debug('onUnload: Cleaning up intervals.');\n\t\tif (this.updateInterval) {\n\t\t\tthis.clearInterval(this.updateInterval);\n\t\t}\n\t\tcallback();\n\t}\n}\n\nif (require.main !== module) {\n\tmodule.exports = (options: Partial<utils.AdapterOptions> | undefined) => new OpenMeteoWeather(options);\n} else {\n\tnew OpenMeteoWeather();\n}\n"],
  "mappings": "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",
  "names": ["config"]
}
